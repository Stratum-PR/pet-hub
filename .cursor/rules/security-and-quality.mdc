---
description: Security and quality standards so code stays safe and pre-commit passes
globs: ["**/*.ts", "**/*.tsx", "**/*.js", "**/*.jsx"]
---

# Security and quality (pet-hub)

- **Console:** Use `if (import.meta.env.DEV) { ... }` around any `console.log` / `console.error` / `console.warn`. No bare console in production paths. Pre-commit flags unguarded console.
- **Errors:** Never show raw `error.message` or `err.message` to users or in unguarded console. Use generic user messages (e.g. `toast.error('Something went wrong.')`) and log only inside `if (import.meta.env.DEV)`.
- **XSS:** No `document.write` or unescaped `innerHTML` / `dangerouslySetInnerHTML` with user input. Use `textContent`, escaped strings, or DOMPurify. Pre-commit blocks these patterns.
- **File uploads:** Any `type="file"` or storage upload must validate MIME (allowlist e.g. image/jpeg, image/png, image/webp, image/gif) and size (e.g. max 5MB) client-side before upload.
- **Pre-commit:** Do not use `--no-verify` for security-related changes. Fix or guard code so the hook passes.

See `docs/SECURITY-CHECKLIST.md` and `scripts/pre-commit` for full checks.
